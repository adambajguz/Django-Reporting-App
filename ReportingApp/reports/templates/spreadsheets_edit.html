{% extends "./base/base_spreadsheets_quickactions.html" %}

{% load custom_tags %}
{% load widget_tweeks %}

{% block breadcrumbs %}
	{{ block.super }} Â» Edit Spreadsheet
{% endblock %}

{% block cotainer_start %} 
	<form class="uk-form" method="post" name="edit_form" action="{% url 'spreadsheets_edit' id=spreadsheet.id %}">
		{% csrf_token %}

{% endblock %}

{% block cotainer_end %} 
	</form>
{% endblock %}

{% block quick_actions %}
	{% for field in spreadsheet_form.visible_fields %}
	<div class="uk-form-row">
		<label class="uk-form-label" for="{{ field.name }}">{{ field.label_tag|safe }}</label>

		{% if field.errors %}
		<div class="uk-alert uk-alert-danger">{{ field.errors.as_text }}</div>
		{% endif %}

		<div class="uk-form-controls">
			{{ field }}
			<p class="uk-form-help-block"><em>{{ field.help_text }}</em></p>
		</div>
	</div>
	{% endfor %}

	<p>Last modification: {{ spreadsheet.spreadsheet_last_modification }}</p>

	<hr style="color: #CCE6FF; border-color: #CCE6FF; background-color: #CCE6FF;">

	<p><button name="add_row" value="Add row" class="uk-button uk-button-success"><i class="uk-icon-th-list"></i> Insert row</button></p>
	<p><button name="add_column" value="Add column" class="uk-button uk-button-success"><i class="uk-icon-arrows-h"></i> Insert Column</button></p>

	<hr style="color: #CCE6FF; border-color: #CCE6FF; background-color: #CCE6FF;">

	<button name="delete" value="Delete" class="uk-margin-bottom uk-button uk-button-danger"><i class="uk-icon-trash"></i> Delete spreadsheet</button>
	<button class="uk-margin-bottom uk-button uk-button-primary"><i class="uk-icon-save"></i> Save</button>
{% endblock %}

{% block content %}

<div class="uk-width-1-1">
	{% if form.errors %}
	<p>Your username and password didn't match. Please try again.</p>
	{% endif %}

		<div class="uk-overflow-container">
			<table class="uk-table uk-table-hover uk-table-striped uk-table-condensed ">
				<thead>
					<tr>
						<th class="uk-text-bold"><span class="uk-float-right">No.</span></th>
						<th class="uk-text-bold"><span class="uk-float-right"><i class="uk-icon-trash"></i></span></th>

						{% for current_column in columns %}
						<th class="uk-text-bold">
							<input type="text" style="min-width: 150px;" name="header_C{{ forloop.counter }}" class="uk-width-1-1" value="{{current_column.column_name}}">
						</th>
						<th style="padding-left: 0; padding-bottom: 12px;">
							<a class="uk-button uk-button-mini" href="{% url 'spreadsheets_column_delete' id=spreadsheet.id cid=current_column.id %}">
								<i class="uk-icon-remove"></i>
							</a>
						</th>
						{% endfor %}
					</tr>
				</thead>

				<tbody>
					{% for it in num_rows %}
					<tr>
						<td>
							<strong class="uk-float-right">{{forloop.counter}}</strong>
						</td>
						<td style="padding-right: 0; padding-bottom: 12px;">
							<a class="uk-button uk-button-mini" href="{% url 'spreadsheets_row_delete' id=spreadsheet.id rid=it %}">
								<i class="uk-icon-remove"></i>
							</a>
						</td>

						{% for current_column in columns %}
						<td colspan="2">
							<input type="text" style="min-width: 150px;" name="cells_C{{ forloop.counter }}" class="uk-width-1-1" value="{{ rows | index:forloop.counter0 | index:it }}">
						</td>
						{% endfor %}
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
</div>

{% endblock %}