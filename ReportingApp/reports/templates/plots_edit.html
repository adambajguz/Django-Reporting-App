{% extends "./base/base_plots_quickactions.html" %}

{% load custom_tags %}
{% load widget_tweeks %}

{% block breadcrumbs %}
	{{ block.super }} Â» Edit Plot
{% endblock %}

{% block cotainer_start %} 
	<form class="uk-form" method="post" name="edit_form" action="{% url 'plots_edit' id=plot.id %}">
		{% csrf_token %}

{% endblock %}

{% block cotainer_end %} 
	</form>
{% endblock %}

{% block quick_actions %}
	{% for field in plot_form.visible_fields %}
	<div class="uk-form-row">
		<label class="uk-form-label" for="{{ field.name }}">{{ field.label_tag|safe }}</label>

		{% if field.errors %}
		<div class="uk-alert uk-alert-danger">{{ field.errors.as_text }}</div>
		{% endif %}

		<div class="uk-form-controls">
			{{ field }}
			<p class="uk-form-help-block"><em>{{ field.help_text }}</em></p>
		</div>
	</div>
	{% endfor %}

	<p>Last modification: {{ plot.plot_last_modification }}</p>

	<hr style="color: #CCE6FF; border-color: #CCE6FF; background-color: #CCE6FF;">
	
	<div class="uk-panel uk-panel-box" style="max-height: 120px; overflow-y: scroll;">
		<p class="uk-panel-title">Data columns:</p>
		{% for column in columns %}
		<div class="uk-form-row">
			<input type="checkbox" name="data_col" value="{{ column.id }}" {% if column.id in data_columns %}checked{% endif %} >{{ column.column_name }}</input>
		</div>
		{% endfor %}
	</div>


	<hr style="color: #CCE6FF; border-color: #CCE6FF; background-color: #CCE6FF;">

	<div class="uk-panel uk-panel-box" style="max-height: 120px; overflow-y: scroll;">
		<p class="uk-panel-title">Grouping columns:</p>

		{% for column in columns %}
		<div class="uk-form-row">
			<input type="checkbox" name="grouping_col" value="{{ column.id }}" {% if column.id in grouping_columns %}checked{% endif %}>{{ column.column_name }}</input>
		</div>
		{% endfor %}
	</div>
	<hr style="color: #CCE6FF; border-color: #CCE6FF; background-color: #CCE6FF;">

	<button name="delete" value="Delete" class="uk-margin-bottom uk-button uk-button-danger"><i class="uk-icon-trash"></i> Delete plot</button>
	<button class="uk-margin-bottom uk-button uk-button-primary"><i class="uk-icon-save"></i> Save</button>
{% endblock %}

{% block content %}

<div class="uk-width-1-1">
	{% if form.errors %}
	<p>Your username and password didn't match. Please try again.</p>
	{% endif %}

		<div class="uk-overflow-container">
			<embed type="image/svg+xml" src= {{ plot_graphics|safe }} />
		</div>
</div>

{% endblock %}